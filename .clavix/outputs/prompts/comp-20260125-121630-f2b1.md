---
id: comp-20260125-121630-f2b1
depthUsed: comprehensive
timestamp: 2026-01-25T12:16:30Z
executed: true
originalPrompt: "The tracking code in the <head> section needs https, update it to <script defer src=\"https://umami.kroam.xyz/script.js\" data-website-id=\"2e966abd-99fc-4363-8007-3737d99bc4c1\"></script>"
---

# Improved Prompt

Objective: Update the Umami tracking script to use HTTPS and the latest configuration.

Target Files:
- Search for the Umami script tag in the `<head>` section of the application.
- Primary candidates: `src/app/layout.tsx`, `src/app/(pages)/layout.tsx`, or any base HTML template files.

Original Script (Pattern):
Any `<script>` tag referencing `umami.js` or `script.js` from `umami.kroam.xyz` or similar domains.

Replacement Script:
<script defer src="https://umami.kroam.xyz/script.js" data-website-id="2e966abd-99fc-4363-8007-3737d99bc4c1"></script>

Implementation Steps:
1. Locate all occurrences of the Umami tracking script in the codebase.
2. Replace the existing script with the provided HTTPS version.
3. If using Next.js `Script` component, ensure attributes like `defer` and `data-website-id` are correctly mapped.

Verification:
- Verify the file compiles without errors.
- Confirm the script tag is correctly rendered in the `<head>` section of the generated HTML.

## Quality Scores
- **Clarity**: 100%
- **Efficiency**: 100%
- **Structure**: 90%
- **Completeness**: 85%
- **Actionability**: 95%
- **Overall**: 94% (Good)

## Original Prompt
```
The tracking code in the <head> section needs https, update it to <script defer src="https://umami.kroam.xyz/script.js" data-website-id="2e966abd-99fc-4363-8007-3737d99bc4c1"></script>
```

## Alternative Approaches
1. **Targeted Search-and-Replace**: Focus strictly on finding the `data-website-id` or domain to ensure every instance is caught.
2. **Environment Variable Configuration**: Move the `website-id` to `.env` for better environment management.

## Validation Checklist
- [ ] Script tag located in `<head>`
- [ ] `src` uses `https://`
- [ ] `data-website-id` matches `2e966abd-99fc-4363-8007-3737d99bc4c1`
- [ ] `defer` attribute is present
- [ ] No duplicate tracking scripts remain

## Edge Cases
- **Next.js Script Component**: Use `next/script` component if applicable.
- **Content Security Policy (CSP)**: Check for potential violations.
- **Protocol-Relative URLs**: Search for `//umami.kroam.xyz` and replace with `https://`.
