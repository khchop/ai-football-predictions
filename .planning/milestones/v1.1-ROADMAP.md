# Milestone v1.1: Stats Accuracy & SEO

**Status:** SHIPPED 2026-02-02
**Phases:** 5-8
**Total Plans:** 10

## Overview

Fix inconsistent accuracy calculations and optimize for search engines. This milestone addressed a critical accuracy calculation bug that was inflating model accuracy by ~48%, added SEO structured data for Google Rich Results, and improved UX transparency with visible denominators and methodology explanations.

## Phases

### Phase 5: Stats Foundation

**Goal**: Single source of truth for accuracy calculations that produces consistent numbers everywhere
**Depends on**: Phase 4 (v1.0)
**Plans**: 3 plans

Plans:
- [x] 05-01: Create stats service layer with canonical accuracy formula
- [x] 05-02: Fix queries.ts functions with incorrect formulas
- [x] 05-03: Fix model detail page metadata accuracy bug

**Details:**
- Created `src/lib/services/stats.ts` with canonical `tendencyPoints > 0` formula
- Fixed IS NOT NULL vs > 0 mismatch that caused ~48% accuracy inflation
- Added NULLIF division protection to prevent division-by-zero errors
- Created TypeScript interfaces for stats data structures

### Phase 6: Data Migration

**Goal**: Historical stats recalculated with corrected formula, preserving audit trail
**Depends on**: Phase 5
**Plans**: 2 plans

Plans:
- [x] 06-01: Execute migration with snapshot and verification report
- [x] 06-02: Create methodology page and changelog entry

**Details:**
- Created `stats_pre_migration` snapshot table (29 models)
- Generated verification report showing average -48% accuracy correction
- Created `/methodology` page explaining calculation formula
- Added CHANGELOG.md entry with before/after examples

### Phase 7: SEO Enhancement

**Goal**: Search engines understand and surface predictions through structured data and optimized metadata
**Depends on**: Phase 6
**Plans**: 3 plans

Plans:
- [x] 07-01: Enhance match page structured data and metadata
- [x] 07-02: Add structured data to blog and competition pages
- [x] 07-03: Sitemap updates and validation sweep

**Details:**
- Added Schema.org SportsEvent, Article, BreadcrumbList structured data
- Created SportsOrganization schema for competition context
- Implemented dynamic noindex for old finished matches (>30 days)
- Added accuracy badge to OG images for social sharing
- Optimized meta descriptions to <160 characters

### Phase 8: UX Transparency

**Goal**: Users understand what accuracy metrics mean and trust the numbers
**Depends on**: Phase 7
**Plans**: 2 plans

Plans:
- [x] 08-01: Create tooltip infrastructure and AccuracyDisplay component
- [x] 08-02: Integrate AccuracyDisplay across leaderboard and model pages

**Details:**
- Installed @radix-ui/react-tooltip for tooltip primitives
- Created AccuracyDisplay component showing "X/Y (Z%)" format
- Added methodology tooltip explaining calculation to all accuracy displays
- Integrated across leaderboard, model pages, stats grid, competition breakdown

---

## Milestone Summary

**Key Decisions:**
- Use `tendencyPoints > 0` not `IS NOT NULL` (prevents ~48% accuracy inflation)
- NULLIF division protection for models with no scored predictions
- EventScheduled for all matches (schema.org standard), signal completion via scores
- Dynamic noindex at 30 days for finished matches (crawl budget optimization)
- TooltipProvider at app level for consistent behavior
- Denominator format "X/Y (Z%)" for transparency

**Issues Resolved:**
- Fixed 48% accuracy inflation bug (IS NOT NULL counted 0-point predictions as correct)
- Eliminated inconsistent accuracy numbers across pages
- Added missing structured data for Rich Results eligibility
- Improved social sharing with accuracy badge on OG images

**Issues Deferred:**
- Google Rich Results Test validation (human verification)
- Mobile tooltip interaction testing (human verification)
- GEO/i18n optimization (deferred to v1.2)
- Advanced metrics like Brier score (deferred to v1.2)

**Technical Debt Incurred:**
- None

---

*For current project status, see .planning/ROADMAP.md*
