---
phase: 17-design-system-foundation
plan: 03
type: execute
wave: 2
depends_on: ["17-01"]
files_modified:
  - src/components/ui/match-badge.tsx
  - src/components/ui/accuracy-badge.tsx
  - src/components/ui/badge.tsx
autonomous: true

must_haves:
  truths:
    - "User sees consistent win/loss/draw colors across all match states"
    - "User sees accuracy percentages with color-coded gradient (red/amber/green)"
    - "Component variants are type-safe with autocomplete"
    - "Match badges work correctly in both light and dark modes"
  artifacts:
    - path: "src/components/ui/match-badge.tsx"
      provides: "Match state badge component with CVA variants"
      exports: ["MatchBadge", "matchBadgeVariants"]
    - path: "src/components/ui/accuracy-badge.tsx"
      provides: "Accuracy percentage badge with gradient colors"
      exports: ["AccuracyBadge"]
    - path: "src/components/ui/badge.tsx"
      provides: "Extended Badge with match state variants"
      contains: "variant.*win"
  key_links:
    - from: "src/components/ui/match-badge.tsx"
      to: "src/app/globals.css"
      via: "semantic color tokens"
      pattern: "text-win|bg-win|text-loss|text-draw"
    - from: "src/components/ui/accuracy-badge.tsx"
      to: "src/app/globals.css"
      via: "accuracy gradient tokens"
      pattern: "text-win|text-draw|text-loss"
---

<objective>
Create component variants for match states (win/loss/draw, live/upcoming/finished) and accuracy display using CVA patterns.

Purpose: Provide type-safe, reusable components that leverage the semantic color tokens from Plan 01. These components will be used throughout Phases 18-23 for consistent match state styling.

Output: MatchBadge component with outcome/status variants, AccuracyBadge component with gradient colors, and extended Badge variants.
</objective>

<execution_context>
@/Users/pieterbos/.claude/get-shit-done/workflows/execute-plan.md
@/Users/pieterbos/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/17-design-system-foundation/17-CONTEXT.md
@.planning/phases/17-design-system-foundation/17-RESEARCH.md
@.planning/phases/17-design-system-foundation/17-01-SUMMARY.md
@src/components/ui/badge.tsx
@src/lib/utils.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create MatchBadge component with CVA variants</name>
  <files>src/components/ui/match-badge.tsx</files>
  <action>
Create src/components/ui/match-badge.tsx following existing CVA patterns:

```typescript
import * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"
import { cn } from "@/lib/utils"

const matchBadgeVariants = cva(
  "inline-flex items-center justify-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors border",
  {
    variants: {
      outcome: {
        win: "bg-win/10 text-win border-win/20 dark:bg-win/20",
        draw: "bg-draw/10 text-draw border-draw/20 dark:bg-draw/20",
        loss: "bg-loss/10 text-loss border-loss/20 dark:bg-loss/20",
        none: "bg-muted text-muted-foreground border-border",
      },
      status: {
        live: "bg-destructive text-white border-destructive animate-pulse",
        upcoming: "bg-primary/10 text-primary border-primary/20",
        finished: "bg-muted text-muted-foreground border-border",
        postponed: "bg-muted text-muted-foreground border-border italic",
        cancelled: "bg-destructive/10 text-destructive border-destructive/20 line-through",
      },
      size: {
        sm: "px-1.5 py-0.5 text-[10px]",
        md: "px-2.5 py-0.5 text-xs",
        lg: "px-3 py-1 text-sm",
      },
    },
    defaultVariants: {
      size: "md",
    },
  }
)

export interface MatchBadgeProps
  extends React.HTMLAttributes<HTMLSpanElement>,
    VariantProps<typeof matchBadgeVariants> {}

function MatchBadge({
  className,
  outcome,
  status,
  size,
  ...props
}: MatchBadgeProps) {
  return (
    <span
      className={cn(matchBadgeVariants({ outcome, status, size }), className)}
      {...props}
    />
  )
}

export { MatchBadge, matchBadgeVariants }
```

Key design decisions:
- outcome variant for match results (win/draw/loss/none)
- status variant for match state (live/upcoming/finished/postponed/cancelled)
- size variant for flexibility (sm/md/lg)
- Uses semantic color tokens from globals.css (--color-win, --color-draw, --color-loss)
- Dark mode adjustments via dark: prefix
- Follows existing Badge component patterns
  </action>
  <verify>
File exists: `test -f src/components/ui/match-badge.tsx && echo "exists"`.
Exports correct: `grep "export.*MatchBadge\|export.*matchBadgeVariants" src/components/ui/match-badge.tsx` shows both.
Uses semantic colors: `grep "text-win\|text-draw\|text-loss" src/components/ui/match-badge.tsx` returns matches.
  </verify>
  <done>MatchBadge component created with type-safe CVA variants for outcome and status.</done>
</task>

<task type="auto">
  <name>Task 2: Create AccuracyBadge component</name>
  <files>src/components/ui/accuracy-badge.tsx</files>
  <action>
Create src/components/ui/accuracy-badge.tsx for accuracy percentage display:

```typescript
import * as React from "react"
import { cn } from "@/lib/utils"

export interface AccuracyBadgeProps extends React.HTMLAttributes<HTMLSpanElement> {
  /** Accuracy percentage (0-100) */
  percentage: number
  /** Show percentage sign */
  showPercent?: boolean
  /** Number of decimal places */
  decimals?: number
}

/**
 * Displays accuracy percentage with gradient color coding.
 *
 * Color thresholds (user decision from CONTEXT.md):
 * - < 40%: Red (low accuracy)
 * - 40-70%: Amber (mid accuracy)
 * - > 70%: Green (high accuracy)
 */
function AccuracyBadge({
  percentage,
  showPercent = true,
  decimals = 1,
  className,
  ...props
}: AccuracyBadgeProps) {
  // Determine color class based on percentage thresholds
  const getColorClasses = (pct: number): string => {
    if (pct < 40) {
      return "text-loss bg-loss/10 border-loss/20"
    }
    if (pct < 70) {
      return "text-draw bg-draw/10 border-draw/20"
    }
    return "text-win bg-win/10 border-win/20"
  }

  const formattedValue = percentage.toFixed(decimals)
  const displayValue = showPercent ? `${formattedValue}%` : formattedValue

  return (
    <span
      className={cn(
        "inline-flex items-center justify-center rounded-full px-2.5 py-0.5 text-xs font-medium border tabular-nums",
        getColorClasses(percentage),
        className
      )}
      {...props}
    >
      {displayValue}
    </span>
  )
}

export { AccuracyBadge }
```

Key design decisions:
- Uses semantic color tokens (win/draw/loss) mapped to accuracy thresholds
- Applies tabular-nums for consistent number alignment
- Configurable decimal places and percent sign display
- Color thresholds: <40% red, 40-70% amber, >70% green (per user decision)
  </action>
  <verify>
File exists: `test -f src/components/ui/accuracy-badge.tsx && echo "exists"`.
Exports correct: `grep "export.*AccuracyBadge" src/components/ui/accuracy-badge.tsx` returns match.
Uses tabular-nums: `grep "tabular-nums" src/components/ui/accuracy-badge.tsx` returns match.
  </verify>
  <done>AccuracyBadge component created with gradient color coding based on percentage thresholds.</done>
</task>

<task type="auto">
  <name>Task 3: Extend Badge component with match state variants</name>
  <files>src/components/ui/badge.tsx</files>
  <action>
Extend existing Badge component to include match state variants:

Update src/components/ui/badge.tsx badgeVariants to add new variants while preserving existing ones:

```typescript
const badgeVariants = cva(
  "inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",
  {
    variants: {
      variant: {
        // Existing variants (preserve these)
        default:
          "border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",
        secondary:
          "border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",
        destructive:
          "border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",

        // New match state variants
        win: "bg-win/10 text-win border-win/20 dark:bg-win/20",
        draw: "bg-draw/10 text-draw border-draw/20 dark:bg-draw/20",
        loss: "bg-loss/10 text-loss border-loss/20 dark:bg-loss/20",

        // New status variants
        live: "bg-destructive text-white border-destructive animate-pulse",
        upcoming: "bg-primary/10 text-primary border-primary/20",
        finished: "bg-muted text-muted-foreground border-border",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)
```

This allows using Badge directly with match semantics:
- `<Badge variant="win">Home Win</Badge>`
- `<Badge variant="live">LIVE</Badge>`

While MatchBadge is more structured (separate outcome/status props), Badge with extended variants provides a simpler API for one-off uses.
  </action>
  <verify>
Win variant exists: `grep "win.*bg-win" src/components/ui/badge.tsx` returns match.
Existing variants preserved: `grep "variant.*default\|variant.*secondary\|variant.*destructive" src/components/ui/badge.tsx` returns matches.
  </verify>
  <done>Badge component extended with win/draw/loss/live/upcoming/finished variants while preserving existing variants.</done>
</task>

</tasks>

<verification>
1. `npm run build` completes without TypeScript errors
2. MatchBadge exports: `grep "export.*MatchBadge" src/components/ui/match-badge.tsx`
3. AccuracyBadge exports: `grep "export.*AccuracyBadge" src/components/ui/accuracy-badge.tsx`
4. Badge has new variants: `grep "variant.*win\|variant.*live" src/components/ui/badge.tsx`
5. All components use semantic color tokens (win/draw/loss) from globals.css
</verification>

<success_criteria>
1. MatchBadge component with outcome (win/draw/loss/none) and status (live/upcoming/finished/postponed/cancelled) variants
2. AccuracyBadge component with gradient colors based on percentage thresholds (<40% red, 40-70% amber, >70% green)
3. Badge component extended with win/draw/loss/live/upcoming/finished variants
4. All components follow existing CVA patterns and use cn() helper
5. Components work in both light and dark modes via dark: prefix styles
</success_criteria>

<output>
After completion, create `.planning/phases/17-design-system-foundation/17-03-SUMMARY.md`
</output>
