---
phase: 11-redirect-optimization
plan: 02
type: execute
wave: 1
depends_on: []
files_modified: []
autonomous: true

must_haves:
  truths:
    - "All league hub pages return robots index:true in metadata"
    - "Noindex issue is documented with root cause analysis"
    - "Orphan page strategy is defined for Phase 12 implementation"
  artifacts:
    - path: ".planning/phases/11-redirect-optimization/11-02-SUMMARY.md"
      provides: "Noindex audit results and orphan page strategy"
      contains: "noindex|orphan"
  key_links: []
---

<objective>
Audit noindex pages and document orphan page strategy for Phase 12.

Purpose: SEO-T09 reports 34 league hub pages with noindex directives, and SEO-T10 reports 111 orphan pages. This plan verifies the current state (code review shows league pages already have index:true), documents findings, and creates a strategy for orphan page resolution in Phase 12.

Output: Verification report confirming noindex status and documented strategy for orphan pages.
</objective>

<execution_context>
@/Users/pieterbos/.claude/get-shit-done/workflows/execute-plan.md
@/Users/pieterbos/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-redirect-optimization/11-RESEARCH.md

Key context from research:
- src/app/leagues/[slug]/page.tsx already has `robots: { index: true, follow: true }`
- Only match pages >30 days old get noindex (intentional, in src/lib/seo/metadata.ts)
- 34 noindex pages likely from stale Ahrefs cache or historical data
- 111 orphan pages need internal linking (Phase 12 scope: SEO-T11, SEO-T12, SEO-T13)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify noindex configuration in league pages</name>
  <files>No files modified - verification only</files>
  <action>
    1. Confirm league page metadata configuration:
       `grep -A3 "robots:" src/app/leagues/[slug]/page.tsx`
       Expected: `index: true, follow: true`

    2. Check if any other league-related pages have noindex:
       `grep -r "noindex\|index: false" --include="*.tsx" src/app/leagues/`
       Expected: No results

    3. Check the match page noindex logic (intentional for old matches):
       `grep -B2 -A5 "shouldNoIndex" src/lib/seo/metadata.ts`
       Expected: Only matches >30 days old get noindex

    4. Verify no global noindex in app layout:
       `grep -r "noindex" --include="*.tsx" src/app/layout.tsx`
       Expected: No noindex in layout

    5. Document findings:
       - League pages: index: true (confirmed)
       - Match pages >30 days: noindex (intentional)
       - Match pages <30 days: index: true
       - Ahrefs 34 noindex pages: likely stale cache
  </action>
  <verify>
    - `grep "index: true" src/app/leagues/[slug]/page.tsx` returns match
    - No unexpected noindex directives found in league pages
  </verify>
  <done>
    League page metadata verified to have index:true. The 34 noindex pages reported by Ahrefs are either stale cache or intentionally noindexed old match pages.
  </done>
</task>

<task type="auto">
  <name>Task 2: Document orphan page strategy for Phase 12</name>
  <files>No files modified - documentation only</files>
  <action>
    1. Review Phase 12 requirements from ROADMAP.md:
       - SEO-T11: Add related content sections to match and model pages
       - SEO-T12: Add recent predictions widget to competition pages
       - SEO-T13: Internal linking improvements

    2. Analyze orphan page categories (from research):
       - Model pages (/models/{id}) - linked from leaderboard only
       - Old match pages (finished >30 days) - no related matches widget
       - Blog posts (/blog/{slug}) - linked from footer only
       - Stats pages (/matches/{id}/stats) - may not be linked from match pages

    3. Define strategy for each category:
       a) Model pages: Add "Top Models" widget to competition pages (Phase 12)
       b) Old match pages: Add "Related Matches" component showing same teams/competition (Phase 12)
       c) Blog posts: Add match-to-blog cross-links in roundup posts (Phase 12)
       d) Stats pages: Verify link exists or add to match page UI

    4. Check if stats link exists in new match pages:
       `grep -r "stats" --include="*.tsx" src/app/leagues/[slug]/[match]/`
       If missing, note as quick win for Phase 12.

    5. Summarize strategy in SUMMARY.md for Phase 12 reference.
  </action>
  <verify>
    - Orphan page categories documented
    - Strategy for each category defined
    - Phase 12 scope confirmed to address all categories
  </verify>
  <done>
    Orphan page strategy documented for Phase 12 implementation. Categories identified: model pages, old match pages, blog posts, and potentially stats pages.
  </done>
</task>

</tasks>

<verification>
After completing both tasks:

1. **Noindex verification:**
   - League pages confirmed to have `robots: { index: true, follow: true }`
   - Only intentional noindex on match pages >30 days old
   - No unexpected noindex in codebase

2. **Orphan strategy verification:**
   - All 4 orphan page categories addressed in strategy
   - Phase 12 requirements mapped to resolution

3. **Documentation:**
   - Findings documented in SUMMARY.md
   - Strategy ready for Phase 12 reference
</verification>

<success_criteria>
- All league pages verified to have index:true robots directive
- Noindex policy confirmed as intentional (30-day old matches only)
- Orphan page categories identified and strategy documented
- Phase 12 has clear direction for internal linking implementation
</success_criteria>

<output>
After completion, create `.planning/phases/11-redirect-optimization/11-02-SUMMARY.md`

Include in SUMMARY:
1. Noindex audit results
2. Root cause of Ahrefs noindex report (stale cache vs intentional)
3. Orphan page categories and counts
4. Strategy for each category (deferred to Phase 12)
5. Any quick wins identified
</output>
