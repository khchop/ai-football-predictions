---
phase: 14-mobile-layout-consolidation
plan: 04
type: execute
wave: 4
depends_on: ["14-03"]
files_modified:
  - src/components/match/match-tabs-mobile.tsx
  - src/components/match/collapsible-section.tsx
  - src/components/ui/button.tsx
autonomous: false

must_haves:
  truths:
    - "All interactive elements meet 44x44px minimum touch target (MOBL-06)"
    - "Tab triggers are 44px tall minimum"
    - "Collapsible section button is 44px tall minimum"
    - "Human verifies swipe gestures work on mobile device"
  artifacts:
    - path: "src/components/match/match-tabs-mobile.tsx"
      provides: "Tab triggers with verified touch targets"
      contains: "min-h-[44px]"
    - path: "src/components/match/collapsible-section.tsx"
      provides: "Collapse button with verified touch target"
      contains: "min-h-[44px]"
  key_links:
    - from: "all interactive components"
      to: "WCAG 2.5.5"
      via: "44px minimum size"
      pattern: "min-h-\\[44px\\]|min-w-\\[44px\\]|h-11|w-11"
---

<objective>
Audit and fix touch target sizes across all new components, then verify mobile experience with human testing.

Purpose: WCAG 2.5.5 AAA compliance ensures accessible mobile experience. Human verification catches issues automated tests miss (swipe feel, scroll behavior, visual layout).

Output: All touch targets meet 44x44px minimum, human-verified mobile experience.
</objective>

<execution_context>
@/Users/pieterbos/.claude/get-shit-done/workflows/execute-plan.md
@/Users/pieterbos/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/14-mobile-layout-consolidation/14-RESEARCH.md
@.planning/phases/14-mobile-layout-consolidation/14-01-SUMMARY.md
@.planning/phases/14-mobile-layout-consolidation/14-02-SUMMARY.md
@.planning/phases/14-mobile-layout-consolidation/14-03-SUMMARY.md

# Files to audit
@src/components/match/match-tabs-mobile.tsx
@src/components/match/collapsible-section.tsx
@src/components/ui/button.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Audit and enforce 44px touch targets</name>
  <files>
src/components/match/match-tabs-mobile.tsx
src/components/match/collapsible-section.tsx
src/components/ui/button.tsx
  </files>
  <action>
Audit all interactive elements in the new mobile components and ensure 44px minimum touch targets.

**match-tabs-mobile.tsx:**
1. Verify TabsTrigger elements have `min-h-[44px]` class
2. Verify TabsList has appropriate height (h-12 = 48px is good)
3. If any trigger is smaller, add `min-h-[44px] px-4` to className

**collapsible-section.tsx:**
1. Verify Button trigger has `min-h-[44px]` class
2. Button should be full width: `w-full`
3. Add `min-h-[44px]` if not present

**button.tsx (if needed):**
Check the buttonVariants cva configuration:
1. Default size should be h-10 or higher
2. If sm size exists and is < 44px, update to h-11 (44px)
3. Icon size should be h-11 w-11

If button.tsx already has proper sizes, no changes needed.

**Search pattern to find violations:**
```bash
grep -r "h-8\|h-9\|h-10\|w-8\|w-9\|w-10" src/components/match/
```

Any h-8 (32px), h-9 (36px), or h-10 (40px) on interactive elements should be updated to h-11 (44px) minimum.
  </action>
  <verify>
Run grep to confirm no touch targets below 44px:
```bash
grep -E "min-h-\[44px\]|h-11|h-12" src/components/match/match-tabs-mobile.tsx
grep -E "min-h-\[44px\]|h-11|h-12" src/components/match/collapsible-section.tsx
```
Both should return matches showing 44px+ heights.
  </verify>
  <done>
Touch target audit complete:
- TabsTrigger elements have min-h-[44px]
- CollapsibleSection button has min-h-[44px]
- No interactive elements below 44px height
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete mobile layout consolidation for match pages:
1. Sticky header with single score display
2. Tabbed navigation (Summary/Stats/Predictions/Analysis)
3. Swipe gestures between tabs
4. Progressive disclosure for stats
5. 44px touch targets
  </what-built>
  <how-to-verify>
**Setup:**
1. Run `npm run dev` to start development server
2. Open a finished match page (e.g., http://localhost:3000/leagues/premier-league/[any-finished-match-slug])
3. Open browser DevTools and toggle mobile viewport (iPhone 12/13 size: 390x844)

**Test MOBL-01 (Score displays once):**
1. Verify score appears in sticky header at top
2. Scroll down - header should stay fixed
3. Verify score does NOT appear anywhere else on the page

**Test MOBL-04 (Tabbed navigation):**
1. Tap "Stats" tab - content should switch without page reload
2. Tap "Predictions" tab - content should switch
3. Tap "Analysis" tab - content should switch
4. Tap "Summary" tab - back to first tab

**Test MOBL-05 (Swipe gestures):**
1. On Summary tab, swipe LEFT - should go to Stats
2. Continue swiping LEFT through Predictions and Analysis
3. Swipe RIGHT - should go back through tabs
4. Verify scrolling UP/DOWN still works (not blocked by swipe handler)

**Test MOBL-03 (Progressive disclosure):**
1. Go to Stats tab
2. On mobile, H2H section should be collapsed behind "Head-to-Head History" button
3. Tap button - section should expand
4. Tap again - section should collapse

**Test MOBL-06 (Touch targets):**
1. All tab buttons should be easy to tap (no mis-taps)
2. Collapse/expand button should be easy to tap
3. Use Chrome DevTools "Rendering" > "Show accessibility tree" to check target sizes

**Test on actual device (if available):**
- Test swipe gestures on real iOS/Android device
- Verify momentum/feel is natural

**Test desktop fallback:**
1. Switch to desktop viewport (1280px+)
2. Verify tabs are NOT shown
3. Verify all content is visible in stacked layout
  </how-to-verify>
  <resume-signal>
Type "approved" if all tests pass.
If issues found, describe:
- Which requirement failed (MOBL-01 through MOBL-06)
- What happened vs what was expected
- Screenshots if helpful
  </resume-signal>
</task>

</tasks>

<verification>
Phase 14 complete when:
1. Touch target audit shows all elements >= 44px
2. Human verification passes all MOBL-01 through MOBL-06 tests
3. Build succeeds: `npm run build`
</verification>

<success_criteria>
- All interactive elements meet 44x44px WCAG 2.5.5 requirement
- Human tester confirms:
  - Score displays exactly once (sticky header)
  - Tabs navigate without reload
  - Swipe gestures work on mobile
  - Progressive disclosure works for stats
  - Touch targets are easy to tap
- Desktop layout unchanged
</success_criteria>

<output>
After completion, create `.planning/phases/14-mobile-layout-consolidation/14-04-SUMMARY.md`
</output>
