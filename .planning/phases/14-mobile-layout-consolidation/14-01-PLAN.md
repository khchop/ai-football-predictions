---
phase: 14-mobile-layout-consolidation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - src/components/match/match-header-sticky.tsx
  - src/components/match/collapsible-section.tsx
autonomous: true

must_haves:
  truths:
    - "react-swipeable v7.0.2+ is installed and available for import"
    - "Sticky header displays compact score on mobile that stays visible during scroll"
    - "Collapsible section can toggle between collapsed and expanded states"
  artifacts:
    - path: "src/components/match/match-header-sticky.tsx"
      provides: "Compact sticky header with score for mobile"
      exports: ["MatchHeaderSticky"]
    - path: "src/components/match/collapsible-section.tsx"
      provides: "Reusable progressive disclosure component"
      exports: ["CollapsibleSection"]
  key_links:
    - from: "package.json"
      to: "node_modules/react-swipeable"
      via: "npm dependency"
      pattern: "react-swipeable"
---

<objective>
Create foundation components for mobile layout: install swipe library, build sticky header, and create collapsible section pattern.

Purpose: These foundational pieces enable the tabbed navigation (Plan 02) and match page integration (Plan 03). Without sticky header, score would be duplicated. Without collapsible section, progressive disclosure would require custom implementation.

Output: Three independent artifacts that later plans compose together.
</objective>

<execution_context>
@/Users/pieterbos/.claude/get-shit-done/workflows/execute-plan.md
@/Users/pieterbos/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/14-mobile-layout-consolidation/14-RESEARCH.md

# Existing components to reference
@src/components/match/match-header.tsx
@src/components/ui/button.tsx
@src/lib/utils.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install react-swipeable for mobile swipe gestures</name>
  <files>package.json</files>
  <action>
Install react-swipeable v7.0.2+ using npm. This library provides the useSwipeable hook needed for tab swipe navigation in Plan 02.

Run: `npm install react-swipeable`

Verify the package appears in package.json dependencies.
  </action>
  <verify>
Run `npm ls react-swipeable` to confirm installation. Should show version 7.0.2 or higher.
Run `npm run build` to confirm no TypeScript errors with the new dependency.
  </verify>
  <done>react-swipeable appears in package.json dependencies at version 7.0.2+</done>
</task>

<task type="auto">
  <name>Task 2: Create MatchHeaderSticky component</name>
  <files>src/components/match/match-header-sticky.tsx</files>
  <action>
Create a sticky header component that displays match score compactly on mobile. This becomes the SINGLE source of truth for score display (MOBL-01).

Key implementation details:
1. Use position:sticky (NOT position:fixed) to avoid CLS penalties
2. Mobile view (md:hidden): Compact single-line score display
3. Desktop view (hidden md:block): Render existing MatchHeader component
4. Apply backdrop-blur for readability over scrolled content
5. Include live match indicator (pulsing border) when isLive=true
6. Use tabular-nums for score alignment

Props interface:
```typescript
interface MatchHeaderStickyProps {
  match: Match;
  competition: Competition;
  isLive: boolean;
  isFinished: boolean;
}
```

Mobile layout (sticky top-0):
- Left: Home team name (truncate) + score
- Center: dash separator
- Right: score + Away team name (truncate)
- Height: max 60px to stay under 20% viewport on small screens

Import Match and Competition types from @/lib/db/schema.
  </action>
  <verify>
Run `npx tsc --noEmit` to verify TypeScript compilation.
Check that component exports MatchHeaderSticky function.
  </verify>
  <done>
MatchHeaderSticky component exists with:
- position:sticky top-0 styling
- Mobile compact view with score
- Desktop passthrough to existing MatchHeader
- isLive visual indicator
  </done>
</task>

<task type="auto">
  <name>Task 3: Create CollapsibleSection component</name>
  <files>src/components/match/collapsible-section.tsx</files>
  <action>
Create a reusable collapsible section component for progressive disclosure (MOBL-03). This handles "View More" pattern for advanced stats.

Key implementation details:
1. Use controlled useState for open/close state
2. Button trigger with min-h-[44px] for touch accessibility (MOBL-06)
3. ChevronDown/ChevronUp icons from lucide-react to indicate state
4. aria-expanded attribute for accessibility
5. Animate content reveal with animate-in slide-in-from-top-2

Props interface:
```typescript
interface CollapsibleSectionProps {
  title: string;
  children: React.ReactNode;
  defaultOpen?: boolean;
  className?: string;
}
```

Use 'use client' directive since it uses useState.
Import Button from @/components/ui/button.
Import ChevronDown, ChevronUp from lucide-react.
Import cn from @/lib/utils.
  </action>
  <verify>
Run `npx tsc --noEmit` to verify TypeScript compilation.
Check that component exports CollapsibleSection function.
Verify 'use client' directive is present.
  </verify>
  <done>
CollapsibleSection component exists with:
- Controlled toggle state
- 44px minimum touch target on trigger
- aria-expanded accessibility
- Animation on expand
  </done>
</task>

</tasks>

<verification>
All three foundation components ready:
1. `npm ls react-swipeable` shows 7.0.2+
2. `src/components/match/match-header-sticky.tsx` exports MatchHeaderSticky
3. `src/components/match/collapsible-section.tsx` exports CollapsibleSection
4. `npm run build` completes without errors
</verification>

<success_criteria>
- react-swipeable installed and importable
- MatchHeaderSticky renders compact mobile score with sticky positioning
- CollapsibleSection toggles open/closed with accessible button
- All components pass TypeScript compilation
</success_criteria>

<output>
After completion, create `.planning/phases/14-mobile-layout-consolidation/14-01-SUMMARY.md`
</output>
