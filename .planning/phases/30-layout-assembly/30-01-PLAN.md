---
phase: 30-layout-assembly
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/match/match-layout.tsx
autonomous: true

must_haves:
  truths:
    - "MatchLayout renders Hero for all match states"
    - "MatchLayout hides Narrative section during live matches"
    - "MatchLayout shows Predictions section for all states"
    - "MatchLayout shows FAQ section for all states"
  artifacts:
    - path: "src/components/match/match-layout.tsx"
      provides: "State-aware layout orchestrator"
      exports: ["MatchLayout"]
  key_links:
    - from: "src/components/match/match-layout.tsx"
      to: "useMatch()"
      via: "Context hook consumption"
      pattern: "useMatch\\(\\)"
    - from: "src/components/match/match-layout.tsx"
      to: "MatchHero, MatchNarrative, SortablePredictionsTable, MatchFAQ"
      via: "Component composition"
      pattern: "<Match(Hero|Narrative|FAQ)"
---

<objective>
Create the MatchLayout client component that orchestrates state-aware section rendering based on matchState from context.

Purpose: Central layout component that decides which sections to render based on match state (upcoming/live/finished), following user decisions from CONTEXT.md.
Output: A single `match-layout.tsx` component that composes all section components with correct conditional logic.
</objective>

<execution_context>
@/Users/pieterbos/.claude/get-shit-done/workflows/execute-plan.md
@/Users/pieterbos/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/30-layout-assembly/30-CONTEXT.md
@.planning/phases/30-layout-assembly/30-RESEARCH.md
@src/components/match/match-data-provider.tsx
@src/components/match/use-match.ts
@src/components/match/match-hero.tsx
@src/components/match/match-narrative.tsx
@src/components/match/sortable-predictions-table.tsx
@src/components/match/match-faq.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create MatchLayout component</name>
  <files>src/components/match/match-layout.tsx</files>
  <action>
Create a new client component `match-layout.tsx` that:

1. Uses 'use client' directive (required for Context consumption)

2. Imports and uses `useMatch()` hook to get matchState

3. Implements section ordering per CONTEXT.md decisions:
   - **Upcoming**: Hero + Narrative ("Match Preview") + Predictions + FAQ
   - **Live**: Hero + Predictions + FAQ (NO narrative)
   - **Finished**: Hero + Narrative ("Match Report") + Predictions + FAQ

4. Layout structure:
   ```tsx
   <div className="max-w-[1200px] mx-auto space-y-8 md:space-y-12">
     <MatchHero />

     {matchState !== 'live' && (
       <section>
         <h2 className="text-2xl font-bold mb-6">
           {matchState === 'finished' ? 'Match Report' : 'Match Preview'}
         </h2>
         <MatchNarrative />
       </section>
     )}

     <PredictionsSection />  {/* Always visible */}

     <MatchFAQ />  {/* Already has its own heading */}
   </div>
   ```

5. Create internal PredictionsSection component that:
   - Has H2 heading "Predictions" (always visible per CONTEXT.md)
   - Uses context to get match data for SortablePredictionsTable
   - Shows empty state message if no predictions
   - Note: SortablePredictionsTable requires props, so PredictionsSection will need to fetch predictions

6. For now, stub PredictionsSection to render heading + placeholder. We'll wire data in Plan 03 when integrating.

Props interface:
```tsx
interface MatchLayoutProps {
  predictions: Array<{
    id: string;
    modelId: string;
    modelDisplayName: string;
    provider: string;
    predictedHomeScore: number;
    predictedAwayScore: number;
    points: number | null;
    isExact: boolean;
    isCorrectResult: boolean;
  }>;
  faqs?: FAQItem[] | null;
}
```

Note: Predictions and FAQs are passed as props from page (server component fetches, client renders).
  </action>
  <verify>
1. TypeScript compiles: `npx tsc --noEmit`
2. File exists with correct exports: `grep -n "export function MatchLayout" src/components/match/match-layout.tsx`
3. Uses useMatch hook: `grep -n "useMatch()" src/components/match/match-layout.tsx`
4. Has conditional for live state: `grep -n "matchState !== 'live'" src/components/match/match-layout.tsx`
  </verify>
  <done>
MatchLayout component exists with:
- 'use client' directive
- useMatch() consumption
- Conditional narrative rendering (hidden for live)
- Dynamic heading ("Match Preview" vs "Match Report")
- Predictions section with H2 heading
- MatchFAQ integration
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` - TypeScript compiles without errors
2. All imports resolve correctly
3. Component renders without errors in isolation (can test by temporarily importing in a test page)
</verification>

<success_criteria>
- [ ] MatchLayout component created at src/components/match/match-layout.tsx
- [ ] Component uses 'use client' directive
- [ ] Component consumes matchState via useMatch()
- [ ] Narrative section hidden when matchState === 'live'
- [ ] Predictions section always rendered with H2 heading
- [ ] FAQ section always rendered
- [ ] TypeScript compiles
</success_criteria>

<output>
After completion, create `.planning/phases/30-layout-assembly/30-01-SUMMARY.md`
</output>
