---
phase: 30-layout-assembly
plan: 05
type: execute
wave: 4
depends_on: [30-04]
files_modified: []
autonomous: false
user_setup: []

must_haves:
  truths:
    - "Upcoming match shows Hero + Preview + Predictions + FAQ"
    - "Live match shows Hero + Predictions + FAQ (no narrative)"
    - "Finished match shows Hero + Report + Predictions + FAQ"
    - "Loading skeleton appears during page load"
    - "Error state shows retry button"
    - "Mobile layout identical to desktop (no hidden content)"
  artifacts: []
  key_links: []
---

<objective>
Visual verification of the new match page layout across all match states.

Purpose: Confirm the assembled layout works correctly for upcoming, live, and finished matches, with proper loading and error states.
Output: Verified working layout for all match states.
</objective>

<execution_context>
@/Users/pieterbos/.claude/get-shit-done/workflows/execute-plan.md
@/Users/pieterbos/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/30-layout-assembly/30-CONTEXT.md
@.planning/phases/30-layout-assembly/30-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Start dev server and find test matches</name>
  <files>None</files>
  <action>
Start the development server and find matches in each state for testing.

1. **Start dev server:**
   ```bash
   npm run dev
   ```

2. **Query database for test matches:**
   ```bash
   # Find upcoming match
   npx prisma db execute --stdin <<EOF
   SELECT m.slug, c.id as comp_id FROM matches m
   JOIN competitions c ON m."competitionId" = c.id
   WHERE m.status = 'scheduled'
   ORDER BY m."kickoffTime" ASC
   LIMIT 1;
   EOF

   # Find live match (if any)
   npx prisma db execute --stdin <<EOF
   SELECT m.slug, c.id as comp_id FROM matches m
   JOIN competitions c ON m."competitionId" = c.id
   WHERE m.status = 'live'
   LIMIT 1;
   EOF

   # Find finished match
   npx prisma db execute --stdin <<EOF
   SELECT m.slug, c.id as comp_id FROM matches m
   JOIN competitions c ON m."competitionId" = c.id
   WHERE m.status = 'finished'
   ORDER BY m."kickoffTime" DESC
   LIMIT 1;
   EOF
   ```

3. **Record test URLs:**
   - Upcoming: /leagues/{comp_id}/{slug}
   - Live: /leagues/{comp_id}/{slug} (if available)
   - Finished: /leagues/{comp_id}/{slug}
  </action>
  <verify>
1. Dev server running on localhost:3000
2. Test match URLs identified for each state
  </verify>
  <done>
- Dev server running
- Test URLs identified for upcoming, live (if available), and finished matches
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete match page layout with state-aware section rendering, loading skeleton, and error handling</what-built>
  <how-to-verify>
**Test 1: Upcoming Match Layout**
1. Navigate to upcoming match URL in browser
2. Verify page shows:
   - [ ] MatchHero with "VS" display (not score)
   - [ ] "Match Preview" section heading
   - [ ] MatchNarrative content (or placeholder if no content)
   - [ ] "Predictions" section heading
   - [ ] SortablePredictionsTable (or empty state)
   - [ ] "Frequently Asked Questions" section with accordion
3. Verify single scrollable page (no tabs)
4. Verify max-width container (~1200px)

**Test 2: Finished Match Layout**
1. Navigate to finished match URL
2. Verify page shows:
   - [ ] MatchHero with final score
   - [ ] "Match Report" section heading (NOT "Match Preview")
   - [ ] MatchNarrative with post-match content
   - [ ] Predictions table with points column and color-coded badges
   - [ ] FAQ section

**Test 3: Live Match Layout** (if live match available)
1. Navigate to live match URL
2. Verify page shows:
   - [ ] MatchHero with current score and LIVE badge
   - [ ] NO narrative section (live matches skip narrative)
   - [ ] Predictions section
   - [ ] FAQ section

**Test 4: Loading State**
1. Open Network tab, set throttling to "Slow 3G"
2. Hard refresh the page (Cmd+Shift+R)
3. Verify skeleton appears:
   - [ ] Hero skeleton (team logos, score area)
   - [ ] Narrative skeleton
   - [ ] Predictions skeleton
   - [ ] FAQ skeleton
4. Verify no layout shift when content loads

**Test 5: Mobile Layout**
1. Open DevTools, toggle device toolbar
2. Select mobile viewport (e.g., iPhone 14)
3. Verify:
   - [ ] All sections visible (no hidden content)
   - [ ] Responsive spacing (tighter on mobile)
   - [ ] No horizontal scroll
   - [ ] Touch targets adequate size

**Test 6: Error State** (optional)
1. Modify page.tsx temporarily to throw error
2. Verify error.tsx renders with retry button
3. Verify retry button works
4. Revert the change
  </how-to-verify>
  <resume-signal>Type "approved" if all tests pass, or describe issues found</resume-signal>
</task>

</tasks>

<verification>
All visual verification tests pass.
</verification>

<success_criteria>
- [ ] Upcoming match shows all 4 sections with correct headings
- [ ] Finished match shows all 4 sections with "Match Report" heading
- [ ] Live match shows 3 sections (no narrative)
- [ ] Loading skeleton appears and matches final layout
- [ ] No layout shift during load
- [ ] Mobile layout shows all content (no tabs, no hidden sections)
- [ ] Single scrollable page on all viewports
</success_criteria>

<output>
After completion, create `.planning/phases/30-layout-assembly/30-05-SUMMARY.md`
</output>
