---
phase: 44-foundation-redirects-canonicals-index-pages
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/leagues/page.tsx
  - src/app/models/page.tsx
autonomous: true

must_haves:
  truths:
    - "/leagues returns HTTP 200 with a listing of all 17 competitions"
    - "/models returns HTTP 200 with a listing of models with performance stats"
    - "/leagues page has self-referential canonical URL, title, description, and OG tags"
    - "/models page has self-referential canonical URL, title, description, and OG tags"
    - "Both pages include a short intro paragraph for SEO/GEO purposes"
    - "Both pages use ISR with appropriate revalidation periods"
  artifacts:
    - path: "src/app/leagues/page.tsx"
      provides: "Leagues index page with ISR"
      contains: "revalidate"
      min_lines: 40
    - path: "src/app/models/page.tsx"
      provides: "Models index page with ISR"
      contains: "revalidate"
      min_lines: 40
  key_links:
    - from: "src/app/leagues/page.tsx"
      to: "src/lib/football/competitions.ts"
      via: "import getActiveCompetitions"
      pattern: "getActiveCompetitions|getCompetitionsByCategory|COMPETITIONS"
    - from: "src/app/models/page.tsx"
      to: "src/lib/db/queries/stats.ts"
      via: "import getLeaderboardWithTrends"
      pattern: "getLeaderboardWithTrends"
    - from: "src/app/leagues/page.tsx"
      to: "/leagues/{slug}"
      via: "Link components"
      pattern: "href.*leagues"
    - from: "src/app/models/page.tsx"
      to: "/models/{id}"
      via: "Link components"
      pattern: "href.*models"
---

<objective>
Create /leagues and /models index pages with proper metadata, ISR, internal links, and SEO content.

Purpose: These pages currently return 404. Creating them fixes INDEX-01 through INDEX-04, provides hub pages for internal linking, and gives search engines proper entry points to discover all competitions and models.

Output: Two new page files with ISR, metadata, and listing content.
</objective>

<execution_context>
@/Users/pieterbos/.claude/get-shit-done/workflows/execute-plan.md
@/Users/pieterbos/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/app/leaderboard/page.tsx
@src/lib/football/competitions.ts
@src/lib/seo/constants.ts
@src/lib/seo/metadata.ts
@src/lib/db/queries/stats.ts
@src/app/models/[id]/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create /leagues index page with ISR and metadata</name>
  <files>src/app/leagues/page.tsx</files>
  <action>
    Create src/app/leagues/page.tsx as a new file. Follow the design patterns from leaderboard/page.tsx (cards, gradients, icons, spacing).

    **Metadata (INDEX-03):**
    ```typescript
    import type { Metadata } from 'next';
    import { BASE_URL } from '@/lib/seo/constants';

    export const metadata: Metadata = {
      title: 'Football Leagues | AI Predictions | kroam.xyz',
      description: 'Explore AI predictions across 17 football competitions including Champions League, Premier League, La Liga, and more.',
      alternates: {
        canonical: `${BASE_URL}/leagues`,
      },
      openGraph: {
        title: 'Football Leagues - AI Predictions',
        description: 'AI predictions across 17 major football competitions worldwide.',
        url: `${BASE_URL}/leagues`,
        type: 'website',
        siteName: 'kroam.xyz',
      },
      twitter: {
        card: 'summary',
        title: 'Football Leagues | kroam.xyz',
        description: '17 competitions tracked with AI model predictions.',
      },
      robots: {
        index: true,
        follow: true,
      },
    };
    ```

    **ISR:**
    ```typescript
    export const revalidate = 21600; // 6 hours — league list rarely changes
    ```

    **Page content:**
    1. Header with icon (Trophy from lucide-react) + h1 "Football Leagues" + intro paragraph:
       "AI predictions across 17 major football competitions. Compare model accuracy by league and explore upcoming matches."

    2. Group competitions by category using getCompetitionsByCategory():
       - "European Club Competitions" (club-europe: UCL, UEL, UECL)
       - "Domestic Leagues" (club-domestic: EPL, La Liga, Bundesliga, Serie A, Ligue 1, Eredivisie, Turkish Super Lig)
       - "International" (international: World Cup, Euro, Nations League, Copa America, AFCON, WC Qual Europe, WC Qual South America)

    3. Each competition as a Link-wrapped Card showing:
       - Competition icon emoji (from CompetitionConfig.icon)
       - Competition name
       - Season info (e.g., "2025-26 Season")
       - Link to /leagues/{competition.id}

    4. Use existing UI components: Card, CardContent from @/components/ui/card
    5. Grid layout: `grid sm:grid-cols-2 lg:grid-cols-3 gap-4` for cards
    6. Follow visual style from leaderboard page: gradient-primary icon container, text-3xl h1, text-muted-foreground subtitle

    **Imports needed:**
    - Link from 'next/link'
    - Card, CardContent from '@/components/ui/card'
    - getCompetitionsByCategory from '@/lib/football/competitions'
    - Trophy from 'lucide-react'
    - BASE_URL from '@/lib/seo/constants'

    Requirements covered: INDEX-01, INDEX-03
  </action>
  <verify>
    1. File exists: `ls src/app/leagues/page.tsx`
    2. Has metadata: `grep "canonical" src/app/leagues/page.tsx` shows self-referential canonical
    3. Has ISR: `grep "revalidate" src/app/leagues/page.tsx` shows 21600
    4. Has all categories: `grep "European\|Domestic\|International" src/app/leagues/page.tsx`
    5. Links to individual leagues: `grep "leagues/" src/app/leagues/page.tsx`
    6. `npx next build --webpack` completes without errors
  </verify>
  <done>/leagues page returns 200 with all 17 competitions grouped by category, proper metadata with canonical/OG tags, ISR revalidation at 6 hours, and internal links to each league.</done>
</task>

<task type="auto">
  <name>Task 2: Create /models index page with ISR and metadata</name>
  <files>src/app/models/page.tsx</files>
  <action>
    Create src/app/models/page.tsx as a new file. Follow design patterns from leaderboard/page.tsx.

    **Metadata (INDEX-04):**
    Use dynamic generateMetadata to include accurate model count:
    ```typescript
    import type { Metadata } from 'next';
    import { BASE_URL } from '@/lib/seo/constants';
    import { getOverallStats } from '@/lib/db/queries';

    export async function generateMetadata(): Promise<Metadata> {
      const stats = await getOverallStats();
      const modelCount = stats.activeModels;

      return {
        title: `AI Models | ${modelCount} Models Competing | kroam.xyz`,
        description: `Compare ${modelCount} open-source AI models predicting football matches. See accuracy rankings, performance trends, and which models predict best.`,
        alternates: {
          canonical: `${BASE_URL}/models`,
        },
        openGraph: {
          title: `AI Models - ${modelCount} Open-Source Models Competing`,
          description: `${modelCount} AI models competing to predict football matches across 17 competitions.`,
          url: `${BASE_URL}/models`,
          type: 'website',
          siteName: 'kroam.xyz',
        },
        twitter: {
          card: 'summary',
          title: `AI Models | kroam.xyz`,
          description: `${modelCount} models competing with live accuracy rankings.`,
        },
        robots: {
          index: true,
          follow: true,
        },
      };
    }
    ```

    **ISR:**
    ```typescript
    export const revalidate = 3600; // 1 hour — model stats update after matches
    ```

    **Page content:**
    1. Header with icon (Bot from lucide-react) + h1 "AI Models" + intro paragraph:
       "{modelCount} open-source AI models compete to predict football matches across 17 competitions. Rankings update after every match."

    2. Fetch model data: `const leaderboard = await getLeaderboardWithTrends(50, 'avgPoints', { timePeriod: 'all' });`
       - Import from '@/lib/db/queries/stats'

    3. Each model as a Link-wrapped Card showing:
       - Rank number (#1, #2, etc.)
       - Model display name
       - Provider name
       - Total predictions count
       - Average points (formatted to 2 decimal places)
       - Trend indicator (up/down/stable) using TrendingUp/TrendingDown/Minus icons from lucide-react
       - Link to /models/{modelId}

    4. Use compact card layout similar to leaderboard:
       - Each card: flex row with rank, name/provider, stats on right
       - Subtle hover effect: hover:bg-card/80 transition-colors
       - Card styling: bg-card/50 border-border/50

    5. Add a CTA link at bottom to "/leaderboard" for detailed filtering:
       "View detailed leaderboard with filters"

    **Imports needed:**
    - Link from 'next/link'
    - Card, CardContent from '@/components/ui/card'
    - getLeaderboardWithTrends from '@/lib/db/queries/stats'
    - getOverallStats from '@/lib/db/queries'
    - Bot, TrendingUp, TrendingDown, Minus from 'lucide-react'
    - BASE_URL from '@/lib/seo/constants'

    **Handle empty state:**
    If leaderboard is empty, show a message: "No prediction data available yet. Models will appear once they start making predictions."

    Requirements covered: INDEX-02, INDEX-04
  </action>
  <verify>
    1. File exists: `ls src/app/models/page.tsx`
    2. Has metadata: `grep "canonical" src/app/models/page.tsx` shows self-referential canonical
    3. Has ISR: `grep "revalidate" src/app/models/page.tsx` shows 3600
    4. Fetches data: `grep "getLeaderboardWithTrends" src/app/models/page.tsx`
    5. Links to individual models: `grep "models/" src/app/models/page.tsx`
    6. `npx next build --webpack` completes without errors
  </verify>
  <done>/models page returns 200 with ranked model listing including performance stats, proper metadata with dynamic model count, canonical/OG tags, ISR revalidation at 1 hour, and internal links to each model.</done>
</task>

</tasks>

<verification>
1. Build succeeds: `npm run build` or `npx next build --webpack`
2. /leagues page exists: `ls src/app/leagues/page.tsx` succeeds
3. /models page exists: `ls src/app/models/page.tsx` succeeds
4. Both have ISR: grep confirms revalidate exports
5. Both have canonical: grep confirms alternates.canonical in metadata
6. Both have OG tags: grep confirms openGraph in metadata
7. Both link to child pages: grep confirms Link components with correct hrefs
</verification>

<success_criteria>
- INDEX-01: /leagues returns 200 with a listing of all leagues with descriptions and internal links
- INDEX-02: /models returns 200 with a listing of all models with performance stats and internal links
- INDEX-03: /leagues page has proper generateMetadata (title, description, canonical, OG tags)
- INDEX-04: /models page has proper generateMetadata (title, description, canonical, OG tags)
</success_criteria>

<output>
After completion, create `.planning/phases/44-foundation-redirects-canonicals-index-pages/44-03-SUMMARY.md`
</output>
