---
phase: 23-performance-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/prediction-table.tsx
  - src/components/match/predictions-skeleton.tsx
  - src/components/quick-league-links.tsx
autonomous: true

must_haves:
  truths:
    - "Components without client hooks render as server components"
    - "Bundle size reduced by removing unnecessary client boundaries"
    - "No functionality regression in affected components"
  artifacts:
    - path: "src/components/prediction-table.tsx"
      provides: "Server-rendered prediction table"
      not_contains: "'use client'"
    - path: "src/components/match/predictions-skeleton.tsx"
      provides: "Server-rendered predictions skeleton"
      not_contains: "'use client'"
    - path: "src/components/quick-league-links.tsx"
      provides: "Server-rendered league links"
      not_contains: "'use client'"
  key_links: []
---

<objective>
Remove unnecessary 'use client' directives from components that only use pure rendering (no hooks, no browser APIs).

Purpose: Components marked 'use client' cannot be server-rendered, increasing bundle size and preventing tree-shaking. Research identified 4 components that are pure render with no client-only features.

Output: 3 components converted to server components by removing 'use client' directive.
</objective>

<execution_context>
@/Users/pieterbos/.claude/get-shit-done/workflows/execute-plan.md
@/Users/pieterbos/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/23-performance-polish/23-RESEARCH.md

@src/components/prediction-table.tsx
@src/components/match/predictions-skeleton.tsx
@src/components/quick-league-links.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove 'use client' from prediction-table.tsx</name>
  <files>src/components/prediction-table.tsx</files>
  <action>
Verify and remove 'use client' directive:

1. Confirm component only uses:
   - cn() utility (works in server components)
   - Array .map() and .sort() (pure JS)
   - Lucide icons (work in server components)
   - Standard JSX rendering

2. Check for any hidden client dependencies:
   - No useState, useEffect, useRouter, usePathname
   - No event handlers that require client hydration
   - No browser APIs

3. Remove the `'use client';` directive from line 1

4. Verify no TypeScript errors after removal

The component sorts predictions and maps over them - pure render logic that works in server components.
  </action>
  <verify>
Remove 'use client' and run `npx tsc --noEmit` to verify no type errors.
Grep for 'use client' in the file to confirm removal.
  </verify>
  <done>prediction-table.tsx is a server component (no 'use client' directive)</done>
</task>

<task type="auto">
  <name>Task 2: Remove 'use client' from predictions-skeleton.tsx</name>
  <files>src/components/match/predictions-skeleton.tsx</files>
  <action>
Verify and remove 'use client' directive:

1. Confirm component only uses:
   - Array.from() for generating skeleton rows (pure JS)
   - Static className strings with Tailwind
   - No hooks, no browser APIs

2. Remove the `'use client';` directive from line 1

3. Verify no TypeScript errors after removal

This component is purely declarative JSX - skeleton divs with CSS classes. No interactivity.
  </action>
  <verify>
Remove 'use client' and run `npx tsc --noEmit` to verify no type errors.
  </verify>
  <done>predictions-skeleton.tsx is a server component (no 'use client' directive)</done>
</task>

<task type="auto">
  <name>Task 3: Remove 'use client' from quick-league-links.tsx</name>
  <files>src/components/quick-league-links.tsx</files>
  <action>
Verify and remove 'use client' directive:

1. Confirm component only uses:
   - COMPETITIONS constant import (static data)
   - next/link Link component (works in server components)
   - Lucide icons (work in server components)
   - Card, CardContent UI components
   - .map() over static array

2. Check that Link usage doesn't require client:
   - Standard href navigation works server-side
   - No programmatic navigation (router.push)

3. Remove the `'use client';` directive from line 1

4. Verify no TypeScript errors after removal
  </action>
  <verify>
Remove 'use client' and run `npx tsc --noEmit` to verify no type errors.
  </verify>
  <done>quick-league-links.tsx is a server component (no 'use client' directive)</done>
</task>

</tasks>

<verification>
1. Run full type check: `npx tsc --noEmit`
2. Build succeeds: `npm run build`
3. Navigate to pages using these components and verify they render correctly:
   - /matches/[id] (uses PredictionTable, PredictionsSkeleton)
   - /matches (may use QuickLeagueLinks)
4. Verify no client-side errors in browser console
</verification>

<success_criteria>
1. 3 files no longer contain 'use client' directive
2. All components render correctly after change
3. No TypeScript errors
4. Build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/23-performance-polish/23-02-SUMMARY.md`
</output>
